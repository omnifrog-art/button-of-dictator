<!doctype html>
<meta charset="utf-8" />
<title>Assigning…</title>
<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
  const supabase = createClient("https://qvslxmokvbjhslbxdhtb.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF2c2x4bW9rdmJqaHNsYnhkaHRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU2ODM1MzYsImV4cCI6MjA2MTI1OTUzNn0.fJ9jTo9yrKWZQ-Hif2-YJo5jWF1RolIsIeZSVB5TPxA");

  try {
    const { data, error } = await supabase.rpc("claim_subdomain", {});
    if (error) throw error;
    const sub = data?.[0]?.subdomain;
    if (!sub) throw new Error("Pool empty");
    location.replace(`https://${sub}.buttonofdictator.xyz/`);
  } catch (e) {
    document.body.innerHTML = `<div style="color:#ff4f4f">Failed to assigne：${e.message}</div>`;
  }
</script>
<body style="margin:0;display:grid;place-items:center;height:100vh;background:#fff;color:#000;font:16px/1.5 system-ui">
  Assigning a subdomain…
</body>
